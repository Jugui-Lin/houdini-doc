{"type": "root", "attrs": {"type": "node", "context": "dop", "internal": "vellumconstraintproperty", "icon": "DOP/vellumconstraintproperty", "tags": "vellum", "since": "17.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Vellum Constraint Properties"], "extent": [135, 168]}, {"type": "summary", "indent": 0, "text": ["Modifies common Vellum constraint properties during a Vellum solve."], "extent": [168, 244]}, {"type": "para", "indent": 0, "text": ["The Vellum Constraint Properties DOP allows modification of common properties of the constraints during a Vellum solve.  In general each property corresponds to an attribute on a constraint primitive, except for ", {"type": "ui", "text": ["Remove"]}, " which is a pseudo-property that immediately deletes the constraint primitive when set.  The properties can be further modified by specifying a ", {"scheme": null, "value": "/dopparticles/vexpressions", "type": "link", "text": ["VEXpression"], "fullpath": "/dopparticles/vexpressions"}, " to perform more advanced VEX processing or geometry lookups. This DOP is the recommended way to modify existing constraints; use the ", {"scheme": "Node", "value": "/nodes/dop/vellumconstraints", "type": "link", "text": ["Vellum Constraints"], "fullpath": "/nodes/dop/vellumconstraints"}, " DOP to create new constraints."], "extent": [244, 864]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [864, 876], "body": [{"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Properties"], "extent": [876, 894], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Stiffness"], "extent": [894, 906], "body": [{"type": "para", "indent": 4, "text": ["The stiffness of the constraint, which controls how strongly it will pull a particle back to its rest state."], "extent": [926, 1040]}], "container": true, "attrs": {"id": "stiffness"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Compression Stiffness"], "extent": [1040, 1063], "body": [{"type": "para", "indent": 4, "text": ["The stiffness of the constraint when being compressed below its initial rest distance."], "extent": [1091, 1183]}], "container": true, "attrs": {"id": "compressstiffness"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Stiffness Dropoff"], "extent": [1183, 1202], "body": [{"type": "para", "indent": 4, "text": ["The distance from the rest state at which the stiffness of the constraint drops off to zero, or increases from zero to full stiffness, depending on the direction of the dropoff.  A negative values indicates a decreasing dropoff, where the stiffness starts at full strength and decreases to zero at the Dropoff distance from the rest state.  A positive value indicates an increasing dropoff, where the stiffness starts at zero and increases to full stiffness at the specified distance from rest.  For stretch constraints this value is in length units; for bend constraints it is stored in degrees."], "extent": [1229, 1831]}], "container": true, "attrs": {"id": "stiffnessdropoff"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Velocity Blend"], "extent": [1831, 1847], "body": [{"type": "para", "indent": 4, "text": ["Controls blending of target velocity into the constrained point.  Provides an amount to blend every 24th of a second.  Only applies to attach and pin constraints."], "extent": [1866, 2034]}], "container": true, "attrs": {"id": "velblend"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Damping Ratio"], "extent": [2034, 2049], "body": [{"type": "para", "indent": 4, "text": ["Stiff constraints tend to vibrate or jitter unacceptably.   Damping reduces this by bleeding energy when evaluating the constraint.  Values less than 1 should be used."], "extent": [2072, 2245]}], "container": true, "attrs": {"id": "dampingratio"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Rest Length"], "extent": [2245, 2258], "body": [{"type": "para", "indent": 4, "text": ["The rest distance of the constraint.  For Stretch-type constraints this should be in linear units (meters by default).  For bend-type constraints it should be in degrees."], "extent": [2279, 2455]}], "container": true, "attrs": {"id": "restlength"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Rest Length Scale"], "extent": [2455, 2474], "body": [{"type": "para", "indent": 4, "text": ["A scale on the original rest length when the constraint was created.  Animating this value allows shrinking constraint rest distances over time."], "extent": [2494, 2644]}], "container": true, "attrs": {"id": "restscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Rest Vector"], "extent": [2644, 2657], "body": [{"type": "para", "indent": 4, "text": ["For Pin to Target constraints, this is the world space position of the goal position for the pin.  For hair bend constraints it is the quaternion representing the relative rotation from one hair segment to the next."], "extent": [2678, 2899]}], "container": true, "attrs": {"id": "restvector"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sliding Rate"], "extent": [2899, 2913], "body": [{"type": "para", "indent": 4, "text": ["For ", {"type": "ui", "text": ["Attach to Geometry"]}, " and ", {"type": "ui", "text": ["Stitch Points"]}, " constraints, the attachment point of the constraint will slide across the target surface at this rate, where 1 matches the constrained point\u2019s velocity."], "extent": [2935, 3142]}], "container": true, "attrs": {"id": "slidingrate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Plastic Threshold"], "extent": [3142, 3161], "body": [{"type": "para", "indent": 4, "text": ["Below this threshold, the material will return to its original shape.\n    When deformed past the threshold, it will begin to creep into its new configuration."], "extent": [3188, 3352]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [3352, 3362], "body": [{"type": "para", "indent": 8, "text": ["Thresholds that are ratios of the current rest length (created with the ", {"type": "ui", "text": ["Ratio of Current Rest Length"]}, " option enabled on the ", {"scheme": "Node", "value": "/nodes/sop/vellumconstraints", "type": "link", "text": ["Vellum Constraints SOP"], "fullpath": "/nodes/sop/vellumconstraints"}, ") are stored on the constraints as negative numbers, and should be specified the same way."], "extent": [3362, 3640]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "plasticthreshold"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Plastic Rate"], "extent": [3640, 3654], "body": [{"type": "para", "indent": 4, "text": ["The speed at which the material adopts its new rest lengths when\n    it begins to flow."], "extent": [3676, 3769]}], "container": true, "attrs": {"id": "plasticrate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Plastic Hardening"], "extent": [3769, 3788], "body": [{"type": "para", "indent": 4, "text": ["Some plastic materials become stiffer after they've undergone deformation. These will have a hardening greater than 1.  Some become softer so will have hardening less than 1. This is a logarithmic multiplier on stiffness."], "extent": [3815, 4042]}], "container": true, "attrs": {"id": "plastichardening"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Break Threshold"], "extent": [4042, 4059], "body": [{"type": "para", "indent": 4, "text": ["The amount of stress or displacement on a constraint to trigger a break."], "extent": [4084, 4162]}], "container": true, "attrs": {"id": "breakthreshold"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Break Type"], "extent": [4162, 4174], "body": [{"type": "para", "indent": 4, "text": ["This controls how the solver decides to break constraints."], "extent": [4197, 4261]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [4261, 4271], "body": [{"type": "para", "indent": 8, "text": ["No automated tests are performed."], "extent": [4271, 4314]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Stress"], "extent": [4314, 4334], "body": [{"type": "para", "indent": 8, "text": ["The stretch stress must exceed the threshold."], "extent": [4334, 4389]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Bend Stress"], "extent": [4389, 4406], "body": [{"type": "para", "indent": 8, "text": ["The bend stress must exceed the threshold."], "extent": [4406, 4458]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Distance"], "extent": [4458, 4480], "body": [{"type": "para", "indent": 8, "text": ["The total distance from the goal location and the current location must exceed the threshold."], "extent": [4480, 4583]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Ratio"], "extent": [4583, 4602], "body": [{"type": "para", "indent": 8, "text": ["The ratio between the current distance and the rest distance must exceed the threshold."], "extent": [4602, 4699]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Bend Angle"], "extent": [4699, 4715], "body": [{"type": "para", "indent": 8, "text": ["The difference between the current angle and the rest angle must exceed the threshold.  This value is specified in degrees."], "extent": [4715, 4848]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "breaktypeall"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remove"], "extent": [4848, 4856], "body": [{"type": "para", "indent": 4, "text": ["A pseudo-property that will cause the constraint to be removed immediately when set to ", {"type": "code", "text": ["1"]}, "."], "extent": [4873, 4970]}], "container": true, "attrs": {"id": "remove"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Broken"], "extent": [4970, 4978], "body": [{"type": "para", "indent": 4, "text": ["A property indicating that the constraint is about to be broken by the solver.  Resetting this to ", {"type": "code", "text": ["0"]}, " can be used to override breaking if this node is plugged into the third input of the ", {"scheme": "Node", "value": "/nodes/dop/vellumsolver", "type": "link", "text": ["Vellum Solver DOP"], "fullpath": "/nodes/dop/vellumsolver"}, "."], "extent": [4978, 5213]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use VEXpression"], "extent": [5213, 5230], "body": [{"type": "para", "indent": 4, "text": ["Execute the ", {"scheme": null, "value": "/dopparticles/vexpressions", "type": "link", "text": ["VEXpression"], "fullpath": "/dopparticles/vexpressions"}, " provided to further modify the values for any properties enabled above.  The names of the properties in the VEXpression will match their parameter names. For example, ", {"type": "code", "text": ["stiffness"]}, "."], "extent": [5249, 5487]}], "container": true, "attrs": {"id": "uselocal"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Bindings"], "extent": [5487, 5502], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Geometry"], "extent": [5502, 5513], "body": [{"type": "para", "indent": 4, "text": ["The name of the data containing the constraint geometry."], "extent": [5513, 5575]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Evaluation Node Path"], "extent": [5575, 5597], "body": [{"type": "para", "indent": 4, "text": ["For nodes with local expressions, this controls where ", {"type": "code", "text": ["ch()"]}, " style expressions in VEX are evaluated with respect to.  By making this ", {"type": "code", "text": ["."]}, ", you can ensure relative references work.\n    It is important to promote this if you are embedding a node inside an HDA you are also exporting the local expressions."], "extent": [5597, 5905]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Inputs"], "extent": [5905, 5918], "body": [{"type": "para", "indent": 0, "text": ["Allows binding DOP data or external SOP geometry to inputs that can be referenced in the VEXpression. By default the Constraint Geometry is bound to geometry input 1, while the Vellum particle geometry is input 2.  They can be referenced with the ", {"type": "code", "text": ["@OpInput1-4"]}, " string parameters when using VEXpressions, or numerically as 0-3 with VEX functions that take an input number."], "extent": [5918, 6292]}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [6292, 6301], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/dop/vellumsolver", "type": "link", "text": ["Vellum Solver DOP"], "fullpath": "/nodes/dop/vellumsolver"}], "extent": [6301, 6349]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumsolver", "type": "link", "text": ["Vellum Solver SOP"], "fullpath": "/nodes/sop/vellumsolver"}], "extent": [6349, 6397]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/dop/vellumconstraints", "type": "link", "text": ["Vellum Constraints DOP"], "fullpath": "/nodes/dop/vellumconstraints"}], "extent": [6397, 6455]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumconstraints", "type": "link", "text": ["Vellum Constraints SOP"], "fullpath": "/nodes/sop/vellumconstraints"}], "extent": [6455, 6513]}], "container": true}], "text": "Related"}], "title": ["Vellum Constraint Properties"], "summary": ["Modifies common Vellum constraint properties during a Vellum solve."]}